<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Backbone.js Patterns Pt.1: Maintaining the Uniform Access Principle</title>
  <meta name="description" content="The entire [Backbone.js] source is annotated with the explicit idea that you should be feeling free, if something is not working, to dig in and figure out ho...">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/2013/08/21/backbone-js-patterns-pt-1-maintaining-the-uniform-access-principle.html">
  <link rel="alternate" type="application/rss+xml" title="Dom Christie" href="http://localhost:4000/feed.xml">
</head>

  <body>
    <header role="banner" class="navigation">
  <nav>
    <a href="/" title="Dom Christie Home (Recent Posts)">
      <img src="/domchristie.jpg" alt="" width="24" height="24" />
      <span class="name">Dom Christie</span>
    </a>
    <ul>
      
        
        <li><a href="/about/">About</a></li>
        
      
        
      
        
      
        
      
        
      
      <li><a href="/feed.xml">RSS</a></li>
    </ul>
  </nav>
</header>

    <main class="container">
      <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post__header">
    <time datetime="2013-08-21T10:11:25+01:00" itemprop="datePublished">
      
        21 Aug 2013
      
    </time>

    
      <h1 itemprop="name headline">
        
          Backbone.js Patterns Pt.1: Maintaining the Uniform Access Principle
        
      </h1>
    
  </header>
  <div class="post__body" itemprop="articleBody">
    <blockquote>The entire [Backbone.js] source is annotated with the explicit idea that you should be feeling free, if something is not working, to dig in and figure out how it works and also to dig in and overwrite things if you find the need. <cite>Jeremy Ashkenas <span class="lower byline">on</span> <a href="http://javascriptjabber.com/004-jsj-backbone-js-with-jeremy-ashkenas/">JavaScript Jabber 004</a></cite></blockquote>

<p>I thought I&apos;d share a few patches that I&apos;ve found useful when developing web apps with Backbone.js. The techniques overwrite prototype methods, but in a responsible way that keeps default behaviours unchanged.</p>

<p>This part takes pointers from <a href="http://stackoverflow.com/questions/6695503/whats-the-best-way-to-override-model-getattr-in-backbone-js">this Stack Overflow question</a> and the <a href="http://c2.com/cgi/wiki?UniformAccessPrinciple">Uniform Access Principle</a>:</p>

<blockquote><p>All services offered by a module should be available through a uniform notation, which does not betray whether they are implemented through storage or through computation</p><cite>Bertrand Meyer</cite></blockquote>

<p>Lets say you have a user model as follows:</p>

<pre><code>App = {};
App.User = Backbone.Model.extend({
  defaults: {
    firstName: &apos;Jon&apos;,
    lastName: &apos;Snow&apos;
  },

  fullName: function() {
    return this.get(&apos;firstName&apos;) + &apos; &apos; + this.get(&apos;lastName&apos;);
  }
});
var user = new App.User();
</code></pre>

<p><code>fullName</code> <em>could</em> be accessed by calling <code>user.fullName()</code>, but that would be inconsistent with accessing other attributes. What&#x2019;s more, if, for example, we decided to compute <code>fullName</code> on the server, we&apos;d have to replace all occurrences of <code>user.fullName()</code> with <code>user.get(&apos;fullName&apos;)</code>.</p>

<p>It would be better to access <code>fullName</code> (and any <em>attribute-like</em> method) via <code>user.get(&apos;fullName&apos;)</code>. This can be achieved by overwriting <code>Backbone.Model.prototype.get</code>:</p>

<pre><code>(function() {
  var oldGet = Backbone.Model.prototype.get;
  Backbone.Model.prototype.get = function(attr) {
    if(typeof this[attr] === &apos;function&apos;) {
      return this[attr]();
    }
    return oldGet.apply(this, arguments);
  };
})();
</code></pre>

<p>This stores the original <code>get</code> method in <code>oldGet</code>, calls the requested method if it exists on the model, or calls the original <code>get</code> method if it doesn&apos;t.</p>

<p><code>Backbone.Model.prototype.escape</code> retrieves attributes by making a call to <code>Backbone.Model.prototype.get</code>, and so should also work with this technique.</p>

<p>Related: <a href="http://emberjs.com/guides/object-model/computed-properties/">computed properties in Ember.js</a>.</p>

<p>Feedback welcome via <a href="https://twitter.com/domchristie">Twitter</a>, or <a href="mailto:christiedom@gmail.com">email</a>.

</p><p>Part 2 will look at techniques for customising <code>toJSON</code> and <code>parse</code> for synchronising data with the server.</p>
  </div>
</article>



    </main>
  </body>
</html>
